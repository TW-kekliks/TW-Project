@{
    Layout = "~/Views/Shared/_LUser.cshtml";
}

@model eUseControl.Models.UserData
@using eUseControl.Extension

<!-- Information Start-->
<div>
    <div class="container-fluid py-5 wow fadeInUp" data-wow-delay="0.1s">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-5">
                    <div class="section-title mb-4">
                        <h2 class="position-relative d-inline-block text-primary text-uppercase">Информация</h2>
                        <h6 class="display-6 mb-0"><small><small><small><small>Имя: @Model.FirstName</small></small></small></small></h6>
                        <h6 class="display-6 mb-0"><small><small><small><small>Фамилия: @Model.LastName</small></small></small></small></h6>
                        <h6 class="display-6 mb-0"><small><small><small><small>Моб.Номер: @Model.PhoneNumber</small></small></small></small></h6>
                        <h6 class="display-6 mb-0"><small><small><small><small>Email: @Model.Email</small></small></small></small></h6>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="section-title mb-4">
                        <h2 class="position-relative d-inline-block text-primary text-uppercase">Оставить отзыв</h2>
                        @using (Html.BeginForm("Comment", "User", FormMethod.Post))
                        {
                       
                                    <input type="text" name="text" class="form-control border-0 bg-light px-4" placeholder="Комментарий" style="height: 55px;" />
                                    <input type="submit" class="btn" value="Отправить" title="Отправить" />
                                
                            

                        }
                    </div>
                </div>
            </div>

        </div>
    </div>
    
</div>
<div class="container wow fadeInUp" data-wow-delay="0.1s" >
    <h2 class="text-primary text-uppercase">Ближайшие записи</h2>
    @using (var db = new eUseControl.BusinessLogic.DBModel.AppointmentContext())
    {
        var appointments = db.Users.Where(p => p.Email == Model.Email).ToList();

        <table class="table">
            <thead>
                <tr>
                    <th>Дата</th>
                    <th>Время</th>
                    <th>Доктор</th>
                    <th>Кабинет</th>
                    <th>Примечания</th>
                    <th>Статус</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var appointment in appointments)
                {
                    <tr>
                        <td>@appointment.Date.ToString("dd/MM/yyyy")</td>
                        <td>@appointment.Time.ToString("hh\\:mm")</td>
                        <td>@appointment.Doctor.GetEnumDescription()</td>
                        <td>@appointment.Room.GetEnumDescription()</td>
                        <td>@appointment.Notes</td>
                        @if (@appointment.Status == eUseControl.Domain.Entities.Enums.ARole.NOTSELECTED)
                        {
                            <td style="color:cadetblue;">Не рассмотренно</td>
                        }
                        @if (@appointment.Status == eUseControl.Domain.Entities.Enums.ARole.ACCEPTED)
                        {
                            <td style="color:green;">Принято</td>
                        }
                        @if (@appointment.Status == eUseControl.Domain.Entities.Enums.ARole.REJECTED)
                        {
                            <td style="color:red;">Отклонено</td>
                        }
                    </tr>
                }
            </tbody>
        </table>

    }

</div>


